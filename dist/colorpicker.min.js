"use strict";var Ne=Object.defineProperty,Be=(r,t,e)=>t in r?Ne(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,b=(r,t,e)=>Be(r,typeof t!="symbol"?t+"":t,e);function Ie(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Dt={exports:{}},tt=typeof Reflect=="object"?Reflect:null,Qt=tt&&typeof tt.apply=="function"?tt.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)},bt;tt&&typeof tt.ownKeys=="function"?bt=tt.ownKeys:Object.getOwnPropertySymbols?bt=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:bt=function(t){return Object.getOwnPropertyNames(t)};function We(r){console&&console.warn&&console.warn(r)}var te=Number.isNaN||function(t){return t!==t};function w(){w.init.call(this)}Dt.exports=w,Dt.exports.once=Xe,w.EventEmitter=w,w.prototype._events=void 0,w.prototype._eventsCount=0,w.prototype._maxListeners=void 0;var ee=10;function xt(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(w,"defaultMaxListeners",{enumerable:!0,get:function(){return ee},set:function(r){if(typeof r!="number"||r<0||te(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");ee=r}}),w.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},w.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||te(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function re(r){return r._maxListeners===void 0?w.defaultMaxListeners:r._maxListeners}w.prototype.getMaxListeners=function(){return re(this)},w.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var n=t==="error",o=this._events;if(o!==void 0)n=n&&o.error===void 0;else if(!n)return!1;if(n){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=o[t];if(l===void 0)return!1;if(typeof l=="function")Qt(l,this,e);else for(var u=l.length,c=ae(l,u),i=0;i<u;++i)Qt(c[i],this,e);return!0};function ie(r,t,e,i){var n,o,s;if(xt(e),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",t,e.listener?e.listener:e),o=r._events),s=o[t]),s===void 0)s=o[t]=e,++r._eventsCount;else if(typeof s=="function"?s=o[t]=i?[e,s]:[s,e]:i?s.unshift(e):s.push(e),n=re(r),n>0&&s.length>n&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=r,a.type=t,a.count=s.length,We(a)}return r}w.prototype.addListener=function(t,e){return ie(this,t,e,!1)},w.prototype.on=w.prototype.addListener,w.prototype.prependListener=function(t,e){return ie(this,t,e,!0)};function Fe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ne(r,t,e){var i={fired:!1,wrapFn:void 0,target:r,type:t,listener:e},n=Fe.bind(i);return n.listener=e,i.wrapFn=n,n}w.prototype.once=function(t,e){return xt(e),this.on(t,ne(this,t,e)),this},w.prototype.prependOnceListener=function(t,e){return xt(e),this.prependListener(t,ne(this,t,e)),this},w.prototype.removeListener=function(t,e){var i,n,o,s,a;if(xt(e),n=this._events,n===void 0)return this;if(i=n[t],i===void 0)return this;if(i===e||i.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if(typeof i!="function"){for(o=-1,s=i.length-1;s>=0;s--)if(i[s]===e||i[s].listener===e){a=i[s].listener,o=s;break}if(o<0)return this;o===0?i.shift():qe(i,o),i.length===1&&(n[t]=i[0]),n.removeListener!==void 0&&this.emit("removeListener",t,a||e)}return this},w.prototype.off=w.prototype.removeListener,w.prototype.removeAllListeners=function(t){var e,i,n;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var o=Object.keys(i),s;for(n=0;n<o.length;++n)s=o[n],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=i[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this};function oe(r,t,e){var i=r._events;if(i===void 0)return[];var n=i[t];return n===void 0?[]:typeof n=="function"?e?[n.listener||n]:[n]:e?Ve(n):ae(n,n.length)}w.prototype.listeners=function(t){return oe(this,t,!0)},w.prototype.rawListeners=function(t){return oe(this,t,!1)},w.listenerCount=function(r,t){return typeof r.listenerCount=="function"?r.listenerCount(t):se.call(r,t)},w.prototype.listenerCount=se;function se(r){var t=this._events;if(t!==void 0){var e=t[r];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}w.prototype.eventNames=function(){return this._eventsCount>0?bt(this._events):[]};function ae(r,t){for(var e=new Array(t),i=0;i<t;++i)e[i]=r[i];return e}function qe(r,t){for(;t+1<r.length;t++)r[t]=r[t+1];r.pop()}function Ve(r){for(var t=new Array(r.length),e=0;e<t.length;++e)t[e]=r[e].listener||r[e];return t}function Xe(r,t){return new Promise(function(e,i){function n(s){r.removeListener(t,o),i(s)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",n),e([].slice.call(arguments))}le(r,t,o,{once:!0}),t!=="error"&&Ye(r,n,{once:!0})})}function Ye(r,t,e){typeof r.on=="function"&&le(r,"error",t,e)}function le(r,t,e,i){if(typeof r.on=="function")i.once?r.once(t,e):r.on(t,e);else if(typeof r.addEventListener=="function")r.addEventListener(t,function n(o){i.once&&r.removeEventListener(t,n),e(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var ce=Dt.exports;const Ue=Ie(ce);var k="top",R="bottom",T="right",D="left",Mt="auto",lt=[k,R,T,D],et="start",ct="end",Ke="clippingParents",ue="viewport",ut="popper",ze="reference",pe=lt.reduce(function(r,t){return r.concat([t+"-"+et,t+"-"+ct])},[]),fe=[].concat(lt,[Mt]).reduce(function(r,t){return r.concat([t,t+"-"+et,t+"-"+ct])},[]),Ze="beforeRead",Ge="read",Je="afterRead",Qe="beforeMain",tr="main",er="afterMain",rr="beforeWrite",ir="write",nr="afterWrite",or=[Ze,Ge,Je,Qe,tr,er,rr,ir,nr];function I(r){return r?(r.nodeName||"").toLowerCase():null}function j(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var t=r.ownerDocument;return t&&t.defaultView||window}return r}function G(r){var t=j(r).Element;return r instanceof t||r instanceof Element}function H(r){var t=j(r).HTMLElement;return r instanceof t||r instanceof HTMLElement}function jt(r){if(typeof ShadowRoot>"u")return!1;var t=j(r).ShadowRoot;return r instanceof t||r instanceof ShadowRoot}function sr(r){var t=r.state;Object.keys(t.elements).forEach(function(e){var i=t.styles[e]||{},n=t.attributes[e]||{},o=t.elements[e];!H(o)||!I(o)||(Object.assign(o.style,i),Object.keys(n).forEach(function(s){var a=n[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function ar(r){var t=r.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(i){var n=t.elements[i],o=t.attributes[i]||{},s=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:e[i]),a=s.reduce(function(l,u){return l[u]="",l},{});!H(n)||!I(n)||(Object.assign(n.style,a),Object.keys(o).forEach(function(l){n.removeAttribute(l)}))})}}const lr={name:"applyStyles",enabled:!0,phase:"write",fn:sr,effect:ar,requires:["computeStyles"]};function W(r){return r.split("-")[0]}var J=Math.max,$t=Math.min,rt=Math.round;function Rt(){var r=navigator.userAgentData;return r!=null&&r.brands&&Array.isArray(r.brands)?r.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function he(){return!/^((?!chrome|android).)*safari/i.test(Rt())}function it(r,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var i=r.getBoundingClientRect(),n=1,o=1;t&&H(r)&&(n=r.offsetWidth>0&&rt(i.width)/r.offsetWidth||1,o=r.offsetHeight>0&&rt(i.height)/r.offsetHeight||1);var s=G(r)?j(r):window,a=s.visualViewport,l=!he()&&e,u=(i.left+(l&&a?a.offsetLeft:0))/n,c=(i.top+(l&&a?a.offsetTop:0))/o,h=i.width/n,g=i.height/o;return{width:h,height:g,top:c,right:u+h,bottom:c+g,left:u,x:u,y:c}}function Tt(r){var t=it(r),e=r.offsetWidth,i=r.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:r.offsetLeft,y:r.offsetTop,width:e,height:i}}function de(r,t){var e=t.getRootNode&&t.getRootNode();if(r.contains(t))return!0;if(e&&jt(e)){var i=t;do{if(i&&r.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function q(r){return j(r).getComputedStyle(r)}function cr(r){return["table","td","th"].indexOf(I(r))>=0}function X(r){return((G(r)?r.ownerDocument:r.document)||window.document).documentElement}function _t(r){return I(r)==="html"?r:r.assignedSlot||r.parentNode||(jt(r)?r.host:null)||X(r)}function ve(r){return!H(r)||q(r).position==="fixed"?null:r.offsetParent}function ur(r){var t=/firefox/i.test(Rt()),e=/Trident/i.test(Rt());if(e&&H(r)){var i=q(r);if(i.position==="fixed")return null}var n=_t(r);for(jt(n)&&(n=n.host);H(n)&&["html","body"].indexOf(I(n))<0;){var o=q(n);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return n;n=n.parentNode}return null}function pt(r){for(var t=j(r),e=ve(r);e&&cr(e)&&q(e).position==="static";)e=ve(e);return e&&(I(e)==="html"||I(e)==="body"&&q(e).position==="static")?t:e||ur(r)||t}function Ht(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function ft(r,t,e){return J(r,$t(t,e))}function pr(r,t,e){var i=ft(r,t,e);return i>e?e:i}function ge(){return{top:0,right:0,bottom:0,left:0}}function me(r){return Object.assign({},ge(),r)}function ye(r,t){return t.reduce(function(e,i){return e[i]=r,e},{})}var fr=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,me(typeof t!="number"?t:ye(t,lt))};function hr(r){var t,e=r.state,i=r.name,n=r.options,o=e.elements.arrow,s=e.modifiersData.popperOffsets,a=W(e.placement),l=Ht(a),u=[D,T].indexOf(a)>=0,c=u?"height":"width";if(!(!o||!s)){var h=fr(n.padding,e),g=Tt(o),p=l==="y"?k:D,$=l==="y"?R:T,v=e.rects.reference[c]+e.rects.reference[l]-s[l]-e.rects.popper[c],d=s[l]-e.rects.reference[l],x=pt(o),O=x?l==="y"?x.clientHeight||0:x.clientWidth||0:0,L=v/2-d/2,f=h[p],m=O-g[c]-h[$],y=O/2-g[c]/2+L,_=ft(f,y,m),A=l;e.modifiersData[i]=(t={},t[A]=_,t.centerOffset=_-y,t)}}function dr(r){var t=r.state,e=r.options,i=e.element,n=i===void 0?"[data-popper-arrow]":i;n!=null&&(typeof n=="string"&&(n=t.elements.popper.querySelector(n),!n)||de(t.elements.popper,n)&&(t.elements.arrow=n))}const vr={name:"arrow",enabled:!0,phase:"main",fn:hr,effect:dr,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function nt(r){return r.split("-")[1]}var gr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function mr(r,t){var e=r.x,i=r.y,n=t.devicePixelRatio||1;return{x:rt(e*n)/n||0,y:rt(i*n)/n||0}}function we(r){var t,e=r.popper,i=r.popperRect,n=r.placement,o=r.variation,s=r.offsets,a=r.position,l=r.gpuAcceleration,u=r.adaptive,c=r.roundOffsets,h=r.isFixed,g=s.x,p=g===void 0?0:g,$=s.y,v=$===void 0?0:$,d=typeof c=="function"?c({x:p,y:v}):{x:p,y:v};p=d.x,v=d.y;var x=s.hasOwnProperty("x"),O=s.hasOwnProperty("y"),L=D,f=k,m=window;if(u){var y=pt(e),_="clientHeight",A="clientWidth";if(y===j(e)&&(y=X(e),q(y).position!=="static"&&a==="absolute"&&(_="scrollHeight",A="scrollWidth")),y=y,n===k||(n===D||n===T)&&o===ct){f=R;var E=h&&y===m&&m.visualViewport?m.visualViewport.height:y[_];v-=E-i.height,v*=l?1:-1}if(n===D||(n===k||n===R)&&o===ct){L=T;var C=h&&y===m&&m.visualViewport?m.visualViewport.width:y[A];p-=C-i.width,p*=l?1:-1}}var S=Object.assign({position:a},u&&gr),N=c===!0?mr({x:p,y:v},j(e)):{x:p,y:v};if(p=N.x,v=N.y,l){var P;return Object.assign({},S,(P={},P[f]=O?"0":"",P[L]=x?"0":"",P.transform=(m.devicePixelRatio||1)<=1?"translate("+p+"px, "+v+"px)":"translate3d("+p+"px, "+v+"px, 0)",P))}return Object.assign({},S,(t={},t[f]=O?v+"px":"",t[L]=x?p+"px":"",t.transform="",t))}function yr(r){var t=r.state,e=r.options,i=e.gpuAcceleration,n=i===void 0?!0:i,o=e.adaptive,s=o===void 0?!0:o,a=e.roundOffsets,l=a===void 0?!0:a,u={placement:W(t.placement),variation:nt(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,we(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,we(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const wr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:yr,data:{}};var Ot={passive:!0};function br(r){var t=r.state,e=r.instance,i=r.options,n=i.scroll,o=n===void 0?!0:n,s=i.resize,a=s===void 0?!0:s,l=j(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach(function(c){c.addEventListener("scroll",e.update,Ot)}),a&&l.addEventListener("resize",e.update,Ot),function(){o&&u.forEach(function(c){c.removeEventListener("scroll",e.update,Ot)}),a&&l.removeEventListener("resize",e.update,Ot)}}const xr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:br,data:{}};var $r={left:"right",right:"left",bottom:"top",top:"bottom"};function Lt(r){return r.replace(/left|right|bottom|top/g,function(t){return $r[t]})}var _r={start:"end",end:"start"};function be(r){return r.replace(/start|end/g,function(t){return _r[t]})}function Nt(r){var t=j(r),e=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:e,scrollTop:i}}function Bt(r){return it(X(r)).left+Nt(r).scrollLeft}function Or(r,t){var e=j(r),i=X(r),n=e.visualViewport,o=i.clientWidth,s=i.clientHeight,a=0,l=0;if(n){o=n.width,s=n.height;var u=he();(u||!u&&t==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}return{width:o,height:s,x:a+Bt(r),y:l}}function Lr(r){var t,e=X(r),i=Nt(r),n=(t=r.ownerDocument)==null?void 0:t.body,o=J(e.scrollWidth,e.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),s=J(e.scrollHeight,e.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-i.scrollLeft+Bt(r),l=-i.scrollTop;return q(n||e).direction==="rtl"&&(a+=J(e.clientWidth,n?n.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function It(r){var t=q(r),e=t.overflow,i=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+n+i)}function xe(r){return["html","body","#document"].indexOf(I(r))>=0?r.ownerDocument.body:H(r)&&It(r)?r:xe(_t(r))}function ht(r,t){var e;t===void 0&&(t=[]);var i=xe(r),n=i===((e=r.ownerDocument)==null?void 0:e.body),o=j(i),s=n?[o].concat(o.visualViewport||[],It(i)?i:[]):i,a=t.concat(s);return n?a:a.concat(ht(_t(s)))}function Wt(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function Cr(r,t){var e=it(r,!1,t==="fixed");return e.top=e.top+r.clientTop,e.left=e.left+r.clientLeft,e.bottom=e.top+r.clientHeight,e.right=e.left+r.clientWidth,e.width=r.clientWidth,e.height=r.clientHeight,e.x=e.left,e.y=e.top,e}function $e(r,t,e){return t===ue?Wt(Or(r,e)):G(t)?Cr(t,e):Wt(Lr(X(r)))}function Er(r){var t=ht(_t(r)),e=["absolute","fixed"].indexOf(q(r).position)>=0,i=e&&H(r)?pt(r):r;return G(i)?t.filter(function(n){return G(n)&&de(n,i)&&I(n)!=="body"}):[]}function Ar(r,t,e,i){var n=t==="clippingParents"?Er(r):[].concat(t),o=[].concat(n,[e]),s=o[0],a=o.reduce(function(l,u){var c=$e(r,u,i);return l.top=J(c.top,l.top),l.right=$t(c.right,l.right),l.bottom=$t(c.bottom,l.bottom),l.left=J(c.left,l.left),l},$e(r,s,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function _e(r){var t=r.reference,e=r.element,i=r.placement,n=i?W(i):null,o=i?nt(i):null,s=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,l;switch(n){case k:l={x:s,y:t.y-e.height};break;case R:l={x:s,y:t.y+t.height};break;case T:l={x:t.x+t.width,y:a};break;case D:l={x:t.x-e.width,y:a};break;default:l={x:t.x,y:t.y}}var u=n?Ht(n):null;if(u!=null){var c=u==="y"?"height":"width";switch(o){case et:l[u]=l[u]-(t[c]/2-e[c]/2);break;case ct:l[u]=l[u]+(t[c]/2-e[c]/2);break}}return l}function dt(r,t){t===void 0&&(t={});var e=t,i=e.placement,n=i===void 0?r.placement:i,o=e.strategy,s=o===void 0?r.strategy:o,a=e.boundary,l=a===void 0?Ke:a,u=e.rootBoundary,c=u===void 0?ue:u,h=e.elementContext,g=h===void 0?ut:h,p=e.altBoundary,$=p===void 0?!1:p,v=e.padding,d=v===void 0?0:v,x=me(typeof d!="number"?d:ye(d,lt)),O=g===ut?ze:ut,L=r.rects.popper,f=r.elements[$?O:g],m=Ar(G(f)?f:f.contextElement||X(r.elements.popper),l,c,s),y=it(r.elements.reference),_=_e({reference:y,element:L,placement:n}),A=Wt(Object.assign({},L,_)),E=g===ut?A:y,C={top:m.top-E.top+x.top,bottom:E.bottom-m.bottom+x.bottom,left:m.left-E.left+x.left,right:E.right-m.right+x.right},S=r.modifiersData.offset;if(g===ut&&S){var N=S[n];Object.keys(C).forEach(function(P){var Y=[T,R].indexOf(P)>=0?1:-1,U=[k,R].indexOf(P)>=0?"y":"x";C[P]+=N[U]*Y})}return C}function Sr(r,t){t===void 0&&(t={});var e=t,i=e.placement,n=e.boundary,o=e.rootBoundary,s=e.padding,a=e.flipVariations,l=e.allowedAutoPlacements,u=l===void 0?fe:l,c=nt(i),h=c?a?pe:pe.filter(function($){return nt($)===c}):lt,g=h.filter(function($){return u.indexOf($)>=0});g.length===0&&(g=h);var p=g.reduce(function($,v){return $[v]=dt(r,{placement:v,boundary:n,rootBoundary:o,padding:s})[W(v)],$},{});return Object.keys(p).sort(function($,v){return p[$]-p[v]})}function Pr(r){if(W(r)===Mt)return[];var t=Lt(r);return[be(r),t,be(t)]}function kr(r){var t=r.state,e=r.options,i=r.name;if(!t.modifiersData[i]._skip){for(var n=e.mainAxis,o=n===void 0?!0:n,s=e.altAxis,a=s===void 0?!0:s,l=e.fallbackPlacements,u=e.padding,c=e.boundary,h=e.rootBoundary,g=e.altBoundary,p=e.flipVariations,$=p===void 0?!0:p,v=e.allowedAutoPlacements,d=t.options.placement,x=W(d),O=x===d,L=l||(O||!$?[Lt(d)]:Pr(d)),f=[d].concat(L).reduce(function(Q,V){return Q.concat(W(V)===Mt?Sr(t,{placement:V,boundary:c,rootBoundary:h,padding:u,flipVariations:$,allowedAutoPlacements:v}):V)},[]),m=t.rects.reference,y=t.rects.popper,_=new Map,A=!0,E=f[0],C=0;C<f.length;C++){var S=f[C],N=W(S),P=nt(S)===et,Y=[k,R].indexOf(N)>=0,U=Y?"width":"height",M=dt(t,{placement:S,boundary:c,rootBoundary:h,altBoundary:g,padding:u}),B=Y?P?T:D:P?R:k;m[U]>y[U]&&(B=Lt(B));var vt=Lt(B),K=[];if(o&&K.push(M[N]<=0),a&&K.push(M[B]<=0,M[vt]<=0),K.every(function(Q){return Q})){E=S,A=!1;break}_.set(S,K)}if(A)for(var gt=$?3:1,At=function(V){var at=f.find(function(yt){var z=_.get(yt);if(z)return z.slice(0,V).every(function(St){return St})});if(at)return E=at,"break"},st=gt;st>0;st--){var mt=At(st);if(mt==="break")break}t.placement!==E&&(t.modifiersData[i]._skip=!0,t.placement=E,t.reset=!0)}}const Dr={name:"flip",enabled:!0,phase:"main",fn:kr,requiresIfExists:["offset"],data:{_skip:!1}};function Oe(r,t,e){return e===void 0&&(e={x:0,y:0}),{top:r.top-t.height-e.y,right:r.right-t.width+e.x,bottom:r.bottom-t.height+e.y,left:r.left-t.width-e.x}}function Le(r){return[k,T,R,D].some(function(t){return r[t]>=0})}function Mr(r){var t=r.state,e=r.name,i=t.rects.reference,n=t.rects.popper,o=t.modifiersData.preventOverflow,s=dt(t,{elementContext:"reference"}),a=dt(t,{altBoundary:!0}),l=Oe(s,i),u=Oe(a,n,o),c=Le(l),h=Le(u);t.modifiersData[e]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":h})}const jr={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Mr};function Rr(r,t,e){var i=W(r),n=[D,k].indexOf(i)>=0?-1:1,o=typeof e=="function"?e(Object.assign({},t,{placement:r})):e,s=o[0],a=o[1];return s=s||0,a=(a||0)*n,[D,T].indexOf(i)>=0?{x:a,y:s}:{x:s,y:a}}function Tr(r){var t=r.state,e=r.options,i=r.name,n=e.offset,o=n===void 0?[0,0]:n,s=fe.reduce(function(c,h){return c[h]=Rr(h,t.rects,o),c},{}),a=s[t.placement],l=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[i]=s}const Hr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Tr};function Nr(r){var t=r.state,e=r.name;t.modifiersData[e]=_e({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const Br={name:"popperOffsets",enabled:!0,phase:"read",fn:Nr,data:{}};function Ir(r){return r==="x"?"y":"x"}function Wr(r){var t=r.state,e=r.options,i=r.name,n=e.mainAxis,o=n===void 0?!0:n,s=e.altAxis,a=s===void 0?!1:s,l=e.boundary,u=e.rootBoundary,c=e.altBoundary,h=e.padding,g=e.tether,p=g===void 0?!0:g,$=e.tetherOffset,v=$===void 0?0:$,d=dt(t,{boundary:l,rootBoundary:u,padding:h,altBoundary:c}),x=W(t.placement),O=nt(t.placement),L=!O,f=Ht(x),m=Ir(f),y=t.modifiersData.popperOffsets,_=t.rects.reference,A=t.rects.popper,E=typeof v=="function"?v(Object.assign({},t.rects,{placement:t.placement})):v,C=typeof E=="number"?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),S=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,N={x:0,y:0};if(y){if(o){var P,Y=f==="y"?k:D,U=f==="y"?R:T,M=f==="y"?"height":"width",B=y[f],vt=B+d[Y],K=B-d[U],gt=p?-A[M]/2:0,At=O===et?_[M]:A[M],st=O===et?-A[M]:-_[M],mt=t.elements.arrow,Q=p&&mt?Tt(mt):{width:0,height:0},V=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:ge(),at=V[Y],yt=V[U],z=ft(0,_[M],Q[M]),St=L?_[M]/2-gt-z-at-C.mainAxis:At-z-at-C.mainAxis,De=L?-_[M]/2+gt+z+yt+C.mainAxis:st+z+yt+C.mainAxis,Pt=t.elements.arrow&&pt(t.elements.arrow),Me=Pt?f==="y"?Pt.clientTop||0:Pt.clientLeft||0:0,Vt=(P=S?.[f])!=null?P:0,je=B+St-Vt-Me,Re=B+De-Vt,Xt=ft(p?$t(vt,je):vt,B,p?J(K,Re):K);y[f]=Xt,N[f]=Xt-B}if(a){var Yt,Te=f==="x"?k:D,He=f==="x"?R:T,Z=y[m],wt=m==="y"?"height":"width",Ut=Z+d[Te],Kt=Z-d[He],kt=[k,D].indexOf(x)!==-1,zt=(Yt=S?.[m])!=null?Yt:0,Zt=kt?Ut:Z-_[wt]-A[wt]-zt+C.altAxis,Gt=kt?Z+_[wt]+A[wt]-zt-C.altAxis:Kt,Jt=p&&kt?pr(Zt,Z,Gt):ft(p?Zt:Ut,Z,p?Gt:Kt);y[m]=Jt,N[m]=Jt-Z}t.modifiersData[i]=N}}const Fr={name:"preventOverflow",enabled:!0,phase:"main",fn:Wr,requiresIfExists:["offset"]};function qr(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function Vr(r){return r===j(r)||!H(r)?Nt(r):qr(r)}function Xr(r){var t=r.getBoundingClientRect(),e=rt(t.width)/r.offsetWidth||1,i=rt(t.height)/r.offsetHeight||1;return e!==1||i!==1}function Yr(r,t,e){e===void 0&&(e=!1);var i=H(t),n=H(t)&&Xr(t),o=X(t),s=it(r,n,e),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!e)&&((I(t)!=="body"||It(o))&&(a=Vr(t)),H(t)?(l=it(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=Bt(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function Ur(r){var t=new Map,e=new Set,i=[];r.forEach(function(o){t.set(o.name,o)});function n(o){e.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!e.has(a)){var l=t.get(a);l&&n(l)}}),i.push(o)}return r.forEach(function(o){e.has(o.name)||n(o)}),i}function Kr(r){var t=Ur(r);return or.reduce(function(e,i){return e.concat(t.filter(function(n){return n.phase===i}))},[])}function zr(r){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(r())})})),t}}function Zr(r){var t=r.reduce(function(e,i){var n=e[i.name];return e[i.name]=n?Object.assign({},n,i,{options:Object.assign({},n.options,i.options),data:Object.assign({},n.data,i.data)}):i,e},{});return Object.keys(t).map(function(e){return t[e]})}var Ce={placement:"bottom",modifiers:[],strategy:"absolute"};function Ee(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Gr(r){r===void 0&&(r={});var t=r,e=t.defaultModifiers,i=e===void 0?[]:e,n=t.defaultOptions,o=n===void 0?Ce:n;return function(a,l,u){u===void 0&&(u=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ce,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},h=[],g=!1,p={state:c,setOptions:function(x){var O=typeof x=="function"?x(c.options):x;v(),c.options=Object.assign({},o,c.options,O),c.scrollParents={reference:G(a)?ht(a):a.contextElement?ht(a.contextElement):[],popper:ht(l)};var L=Kr(Zr([].concat(i,c.options.modifiers)));return c.orderedModifiers=L.filter(function(f){return f.enabled}),$(),p.update()},forceUpdate:function(){if(!g){var x=c.elements,O=x.reference,L=x.popper;if(Ee(O,L)){c.rects={reference:Yr(O,pt(L),c.options.strategy==="fixed"),popper:Tt(L)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(C){return c.modifiersData[C.name]=Object.assign({},C.data)});for(var f=0;f<c.orderedModifiers.length;f++){if(c.reset===!0){c.reset=!1,f=-1;continue}var m=c.orderedModifiers[f],y=m.fn,_=m.options,A=_===void 0?{}:_,E=m.name;typeof y=="function"&&(c=y({state:c,options:A,name:E,instance:p})||c)}}}},update:zr(function(){return new Promise(function(d){p.forceUpdate(),d(c)})}),destroy:function(){v(),g=!0}};if(!Ee(a,l))return p;p.setOptions(u).then(function(d){!g&&u.onFirstUpdate&&u.onFirstUpdate(d)});function $(){c.orderedModifiers.forEach(function(d){var x=d.name,O=d.options,L=O===void 0?{}:O,f=d.effect;if(typeof f=="function"){var m=f({state:c,name:x,instance:p,options:L}),y=function(){};h.push(m||y)}})}function v(){h.forEach(function(d){return d()}),h=[]}return p}}var Jr=[xr,Br,wr,lr,Hr,Dr,Fr,vr,jr],Qr=Gr({defaultModifiers:Jr});const ti=([r,t,e,i])=>{const n=Math.max(r,t,e),o=n-Math.min(r,t,e),s=o&&(n==r?(t-e)/o:n==t?2+(e-r)/o:4+(r-t)/o);return[60*(s<0?s+6:s),n&&o/n,n,i]},Ae=r=>r.replace(/[^0-9%.,]/g,"").split(",").map(t=>parseFloat(t)/(t.endsWith("%")?100:1)),ei=r=>{const t=document.createElement("span");t.style.display="none",t.style.color=r,document.body.append(t);const{color:e}=getComputedStyle(t);if(t.remove(),!e)return null;const[i,n,o,s]=Ae(e);return ti([i/255,n/255,o/255,s])},ri=r=>{const t=Ae(r).map((e,i)=>Math.min(e,i?1:255));return t.length<3||t.some(e=>isNaN(e))?null:t},Se=r=>{let t;/^hsva?\(/i.test(r)?t="hsv":/^hsla?\(/i.test(r)?t="hsl":/^rgba?\(/i.test(r)?t="rgb":t="hex";const e=t==="hsv"?ri(r):ei(r);if(!e)throw new Error("Color could not be parsed!");return e[3]=e[3]??1,{color:e,format:t}},ot=r=>r.toFixed(),ii=(r,t)=>(""+ +r.toFixed(t)).replace(/^0\./g,"."),ni=([r,t,e,i])=>{const n=e-e*t/2,o=Math.min(n,1-n);return[r,o?(e-n)/o:0,n,i]},Ft=([r,t,e,i])=>{const n=(o,s=(o+r/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[n(5),n(3),n(1),i]},Ct=([r,t,e,i],n,o=!1)=>{const s=o||i<1;n==="rgb"&&s&&(n="rgba");const a=n.startsWith("hs")?[ot(r),ot(t*100)+"%",ot(e*100)+"%"]:[ot(r*255),ot(t*255),ot(e*255)];return s&&a.push(ii(i,2)),`${n}(${a.join()})`},oi=r=>"#"+r.slice(0,r[3]<1?4:3).map(t=>Math.round(t*255).toString(16).padStart(2,"0")).join(""),si=(r,t)=>t==="hsv"?Ct(r,t):t==="hsl"?Ct(ni(r),t):t==="rgb"?Ct(Ft(r),t):t==="rgba"?Ct(Ft(r),t,!0):oi(Ft(r));class F{constructor(t){if(b(this,"color"),!t)this.color=[0,0,0,1];else if(t instanceof F)this.color=[...t.color];else if(Array.isArray(t)){const[e=0,i=0,n=0,o=1]=t;this.color=[e,i,n,o]}else this.color=Se(t).color}getSet(t,e){if(e===void 0)return this.color[t];const i=[...this.color];return i[t]=e,new F(i)}hue(t){return this.getSet(0,t)}saturation(t){return this.getSet(1,t)}value(t){return this.getSet(2,t)}alpha(t){return this.getSet(3,t)}string(t){return si(this.color,t)}toString(){return this.string("hex")}clone(){return new F(this)}}class qt extends Ue{constructor(t){super(),b(this,"x",0),b(this,"y",0),b(this,"$track"),b(this,"$thumb"),this.$track=t,this.$thumb=t.querySelector(".cp_thumb"),this.$track.addEventListener("pointerdown",e=>{this.$track.setPointerCapture(e.pointerId),this.handleDrag(e),e.preventDefault()}),this.$track.addEventListener("pointermove",e=>{this.$track.hasPointerCapture(e.pointerId)&&(this.handleDrag(e),e.preventDefault())}),this.$track.addEventListener("pointerup",e=>{this.$track.releasePointerCapture(e.pointerId),this.$thumb.focus(),e.preventDefault()}),this.$track.addEventListener("keydown",e=>{e.key==="ArrowLeft"?(this.handleNudge(-1,0,e.shiftKey),e.preventDefault()):e.key==="ArrowRight"?(this.handleNudge(1,0,e.shiftKey),e.preventDefault()):e.key==="ArrowUp"?(this.handleNudge(0,-1,e.shiftKey),e.preventDefault()):e.key==="ArrowDown"&&(this.handleNudge(0,1,e.shiftKey),e.preventDefault())})}handleDrag(t){const e=this.$track.getBoundingClientRect();this.fireDrag((t.clientX-e.x)/e.width,(t.clientY-e.y)/e.height)}handleNudge(t,e,i){const n=i?.1:.01;this.fireDrag(this.x+t*n,this.y+e*n)}fireDrag(t,e){t<0?t=0:t>1&&(t=1),e<0?e=0:e>1&&(e=1),this.emit("drag",t,e)}move(t,e){t!==void 0&&(this.x=t,this.$thumb.style.left=`${t*100}%`),e!==void 0&&(this.y=e,this.$thumb.style.top=`${e*100}%`)}}const ai={headless:!1,toggleStyle:"button",container:null,color:null,swatches:null,swatchesOnly:!1,enableAlpha:!0,enableEyedropper:!0,formats:["hex","rgb","hsv","hsl"],defaultFormat:"hex",submitMode:"confirm",showClearButton:!1,dismissOnOutsideClick:!0,dismissOnEscape:!0,dialogPlacement:"top",dialogOffset:8,staticPlacement:"center",staticOffset:8},Pe=r=>r?r instanceof HTMLElement?r:document.querySelector(r):null,li=(r,t,e)=>{const[i,n="center"]=t.split(" "),o=`${e}px`,s=i==="bottom"?"bottom":"top",a=i==="center";r.style[s]=a?"50%":o;const l=n==="right"?"right":"left",u=n==="center";r.style[l]=u?"50%":o,r.style.position="fixed",r.style.transform=`translate(${u?"-50%":"0%"}, ${a?"-50%":"0%"})`},ci='<div class="cp_dialog"><div class="cp_area cp_area-hsv"><div class="cp_thumb" tabindex="0"></div></div><div class="cp_dialog-inner"><div class="cp_slider-hue cp_slider"><div class="cp_thumb" tabindex="0"></div></div><div class="cp_slider cp_slider-alpha"><div class="cp_thumb" tabindex="0"></div></div><div class="cp_swatches"></div><div class="cp_formats"></div><div class="cp_input-group"><div class="cp_sample"></div><input class="cp_value" value="#ff0000" autocomplete="false" spellcheck="false" /><button type="button" class="cp_action cp_eyedrop"><svg class="cp_icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 256 256"><g fill="currentColor"><path d="m207.8 87.6l-25.37 25.53l4.89 4.88a16 16 0 0 1 0 22.64l-9 9a8 8 0 0 1-11.32 0l-60.68-60.7a8 8 0 0 1 0-11.32l9-9a16 16 0 0 1 22.63 0l4.88 4.89l25-25.11c10.79-10.79 28.37-11.45 39.45-1a28 28 0 0 1 .52 40.19" opacity="0.2"/><path d="M224 67.3a35.8 35.8 0 0 0-11.26-25.66c-14-13.28-36.72-12.78-50.62 1.13L142.8 62.2a24 24 0 0 0-33.14.77l-9 9a16 16 0 0 0 0 22.64l2 2.06l-51 51a39.75 39.75 0 0 0-10.53 38l-8 18.41A13.68 13.68 0 0 0 36 219.3a15.92 15.92 0 0 0 17.71 3.35L71.23 215a39.89 39.89 0 0 0 37.06-10.75l51-51l2.06 2.06a16 16 0 0 0 22.62 0l9-9a24 24 0 0 0 .74-33.18l19.75-19.87A35.75 35.75 0 0 0 224 67.3M97 193a24 24 0 0 1-24 6a8 8 0 0 0-5.55.31l-18.1 7.91L57 189.41a8 8 0 0 0 .25-5.75A23.88 23.88 0 0 1 63 159l51-51l33.94 34ZM202.13 82l-25.37 25.52a8 8 0 0 0 0 11.3l4.89 4.89a8 8 0 0 1 0 11.32l-9 9L112 83.26l9-9a8 8 0 0 1 11.31 0l4.89 4.89a8 8 0 0 0 5.65 2.34a8 8 0 0 0 5.66-2.36l24.94-25.09c7.81-7.82 20.5-8.18 28.29-.81a20 20 0 0 1 .39 28.7Z"/></g></svg></button><button type="button" class="cp_action cp_clear"><svg class="cp_icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 256 256"><g fill="currentColor"><path d="M224 56v144a8 8 0 0 1-8 8H68.53a8 8 0 0 1-6.86-3.88L16 128l45.67-76.12A8 8 0 0 1 68.53 48H216a8 8 0 0 1 8 8" opacity="0.2"/><path d="M216 40H68.53a16.08 16.08 0 0 0-13.72 7.77L9.14 123.88a8 8 0 0 0 0 8.24l45.67 76.11A16.08 16.08 0 0 0 68.53 216H216a16 16 0 0 0 16-16V56a16 16 0 0 0-16-16M61.67 204.12l6.86-4.12ZM216 200H68.53l-43.2-72l43.2-72H216Zm-109.66-53.66L124.69 128l-18.35-18.34a8 8 0 0 1 11.32-11.32L136 116.69l18.34-18.35a8 8 0 0 1 11.32 11.32L147.31 128l18.35 18.34a8 8 0 0 1-11.32 11.32L136 139.31l-18.34 18.35a8 8 0 0 1-11.32-11.32"/></g></svg></button><button type="button" class="cp_action cp_submit"><svg class="cp_icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 256 256"><g fill="currentColor"><path d="m237.66 85.26l-128.4 128.4a8 8 0 0 1-11.32 0l-71.6-72a8 8 0 0 1 0-11.31l24-24a8 8 0 0 1 11.32 0L104 147.43l98.34-97.09a8 8 0 0 1 11.32 0l24 23.6a8 8 0 0 1 0 11.32" opacity="0.2"/><path d="m243.28 68.24l-24-23.56a16 16 0 0 0-22.59 0L104 136.23l-36.69-35.6a16 16 0 0 0-22.58.05l-24 24a16 16 0 0 0 0 22.61l71.62 72a16 16 0 0 0 22.63 0L243.33 90.91a16 16 0 0 0-.05-22.67M103.62 208L32 136l24-24a.6.6 0 0 1 .08.08l42.35 41.09a8 8 0 0 0 11.19 0L208.06 56L232 79.6Z"/></g></svg></button></div></div></div>',ui='<div class="cp_caret"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 256 256"><path fill="currentColor" d="M208.49 120.49a12 12 0 0 1-17 0L140 69v147a12 12 0 0 1-24 0V69l-51.51 51.49a12 12 0 0 1-17-17l72-72a12 12 0 0 1 17 0l72 72a12 12 0 0 1 0 17"/></svg></div>';let Et;class ke extends ce.EventEmitter{constructor(t,e={}){super(),b(this,"_open",!1),b(this,"_unset",!0),b(this,"_firingChange",!1),b(this,"_format"),b(this,"_color"),b(this,"_newColor"),b(this,"_swatches"),b(this,"config"),b(this,"popper"),b(this,"isInput"),b(this,"$toggle"),b(this,"$dialog"),b(this,"$button"),b(this,"$input"),b(this,"changeHandler"),b(this,"clickHandler"),b(this,"hsvSlider"),b(this,"hueSlider"),b(this,"alphaSlider"),b(this,"$formats"),b(this,"$colorInput"),this.config={...ai,...e},t=Pe(t)??document.createElement("button"),this.$toggle=t;const i=this.config.color||t.value||t.dataset.color||void 0;this.config.headless||this.createToggle(t),this._setCurrentColor(new F(i),!1),i||this.clear(!1),this.setSwatches(this.config.swatches),this.config.dismissOnOutsideClick&&window.addEventListener("pointerdown",n=>{if(!this._open)return;const o=n.target;!o.closest(".cp_dialog")&&!o.closest(".color-picker")&&this.close()}),this.config.dismissOnEscape&&window.addEventListener("keydown",n=>{if(n.key==="Escape"){const o=document.querySelector(":focus");(!o||o.closest(".cp_dialog"))&&this.close();return}}),this.close()}get isOpen(){return this._open}get color(){return this._unset?null:this._color}get swatches(){return this._swatches}get selectedColor(){return this._newColor}get format(){return this._format}get element(){return this.$toggle}createToggle(t){const e=t instanceof HTMLInputElement;this.isInput=e,this.$toggle=e?document.createElement("button"):t,this.$input=e?t:document.createElement("input"),this.isInput&&t.type=="color"&&(t.type="text"),t.replaceWith(this.$toggle),this.$input.tabIndex=-1,this.$input.readOnly=!0,this.$input.classList.add("cp_input"),this.config.toggleStyle==="input"&&this.$toggle.classList.add("cp_wide"),this.$button=document.createElement("div"),this.$button.classList.add("cp_button"),this.$button.innerHTML=ui,this.$toggle.classList.add("color-picker"),this.$toggle.setAttribute("type","button"),this.$toggle.append(this.$input,this.$button),this.changeHandler=()=>{this._firingChange||this.setColor(this.$input.value,!1)},this.clickHandler=()=>this.toggle(),this.$input.addEventListener("change",this.changeHandler),this.$toggle.addEventListener("click",this.clickHandler)}appendTo(t){t.append(this.element)}setSwatches(t){this._swatches=t||[],this.updateSwatches()}toggle(t=!this._open,e=!0){t?this.open(e):this.close(e)}open(t=!0){var e;if(this._open)return;this._open=!0,Et?.close(),Et=this;const i=Pe(this.config.container)??document.body;i.insertAdjacentHTML("beforeend",ci),this.$dialog=i.lastElementChild,this.$colorInput=this.$dialog.querySelector(".cp_value"),this.populateDialog(),this.updateSwatches(),this.bindDialog(),this.setFormat(this.config.defaultFormat,!1),this.updateColor(),document.documentElement.contains(this.$toggle)?this.popper=Qr(this.$toggle,this.$dialog,{placement:this.config.dialogPlacement,strategy:"absolute",modifiers:[{name:"offset",options:{offset:[0,this.config.dialogOffset]}}]}):(this.popper=void 0,li(this.$dialog,this.config.staticPlacement,this.config.staticOffset)),this.$colorInput.focus({preventScroll:!0}),(e=this.$button)==null||e.classList.add("cp_open"),setTimeout(()=>this.$dialog.classList.add("cp_open")),t&&(this.emit("open"),setTimeout(()=>this.emit("opened"),this.getAnimationDuration()))}prompt(t=!1){return new Promise(e=>{this.once("close",()=>e(this.color)),t&&this.once("closed",()=>this.destroy()),this.open()})}populateDialog(){this.config.formats&&(this.$formats=this.config.formats.map(t=>{const e=document.createElement("button");return e.className="cp_format",e.dataset.format=t,e.textContent=t.toUpperCase(),e.addEventListener("click",()=>this.setFormat(t)),e}),this.$dialog.querySelector(".cp_formats").append(...this.$formats))}bindDialog(){const t=this.$dialog.querySelector(".cp_area-hsv");this.hsvSlider=new qt(t),this.hsvSlider.on("drag",(a,l)=>{this._setNewColor(this._newColor.saturation(a).value(1-l))});const e=this.$dialog.querySelector(".cp_slider-hue");this.hueSlider=new qt(e),this.hueSlider.on("drag",a=>{this._setNewColor(this._newColor.hue(a*360))});const i=this.$dialog.querySelector(".cp_slider-alpha");this.config.enableAlpha?(this.alphaSlider=new qt(i),this.alphaSlider.on("drag",a=>{this._setNewColor(this._newColor.alpha(a),!0)})):i.remove();const n=this.$dialog.querySelector(".cp_eyedrop");this.config.enableEyedropper&&"EyeDropper"in window?n.addEventListener("click",()=>{new EyeDropper().open().then(a=>{const l=new F(a.sRGBHex);this._setNewColor(l)}).catch(()=>{})}):n.remove();const o=this.$dialog.querySelector(".cp_submit");this.config.submitMode==="confirm"?o.addEventListener("click",()=>this.submit()):o.remove();const s=this.$dialog.querySelector(".cp_clear");if(this.config.showClearButton?s.addEventListener("click",()=>{this.clear(),this.close()}):s.remove(),this.$colorInput.addEventListener("input",()=>{try{const{color:a,format:l}=Se(this.$colorInput.value);this.setFormat(l,!1),this._setNewColor(new F(a),!1)}catch{}}),this.$colorInput.addEventListener("keydown",a=>{a.key==="Enter"&&this.submit()}),this.$colorInput.addEventListener("dblclick",()=>{navigator.clipboard&&navigator.clipboard.writeText(this.$colorInput.value)}),this.config.swatchesOnly){const a=this.$dialog.querySelector(".cp_input-group");a&&a.remove();const l=this.$dialog.querySelector(".cp_formats");l&&l.remove(),e&&e.remove(),t&&t.remove(),i&&i.remove()}}getAnimationDuration(){const e=window.getComputedStyle(this.$toggle).getPropertyValue("--cp-delay");return parseFloat(e)*(e.endsWith("ms")?1:1e3)}close(t=!0){var e;if(!this._open)return;this._open=!1,Et=void 0,(e=this.$button)==null||e.classList.remove("cp_open");const i=this.$dialog,n=this.popper;this.$dialog=void 0,this.popper=void 0,i?.classList.remove("cp_open"),setTimeout(()=>{i?.remove(),n?.destroy(),t&&this.emit("closed")},this.getAnimationDuration()),t&&this.emit("close")}submit(t=this._newColor,e=!0){this._setCurrentColor(t,e,!0),this.close(e)}destroy(){var t;if(this.close(),(t=this.$dialog)==null||t.remove(),this.isInput){if(!this.$input)return;this.$toggle.removeChild(this.$input),this.$toggle.replaceWith(this.$input),this.$input.classList.remove("cp_input"),this.$input.removeAttribute("tabindex"),this.$input.removeAttribute("readonly"),this.changeHandler&&this.$input.removeEventListener("change",this.changeHandler)}else{if(!this.$toggle)return;this.$toggle.classList.remove("color-picker","cp_open"),this.$toggle.removeAttribute("data-color"),this.$toggle.removeAttribute("type"),this.$toggle.textContent="",this.clickHandler&&this.$toggle.removeEventListener("click",this.clickHandler)}}clear(t=!0){this._unset=!0,this.updateAppliedColor(t)}setColor(t,e=!0){if(!t)return this.clear(e);this._setCurrentColor(new F(t),e)}setFormat(t,e=!0){this._format=t,this.updateFormat(),e&&(this.updateColor(),this.updateAppliedColor(!1))}_setNewColor(t,e=!0){this._newColor=t,(this.config.submitMode==="instant"||this.config.swatchesOnly)&&(this._unset=!1,this._color=t,this.updateAppliedColor(!0)),this.updateColor(e)}_setCurrentColor(t,e=!0,i=!0){this._unset=!1,this._newColor=this._color=t,this.updateColor(i),this.updateAppliedColor(e)}updateColor(t=!0){var e,i,n,o,s,a,l,u,c,h;const g=((e=this.color)==null?void 0:e.toString())??"transparent",p=this._newColor.string("hex");(i=this.$dialog)==null||i.style.setProperty("--cp-base-color",p.substring(0,7)),(n=this.$button)==null||n.style.setProperty("--cp-current-color",g),(o=this.$dialog)==null||o.style.setProperty("--cp-current-color",g),(s=this.$dialog)==null||s.style.setProperty("--cp-color",p),(a=this.$dialog)==null||a.style.setProperty("--cp-hue",this._newColor.hue().toString()),(l=this.$dialog)==null||l.style.setProperty("--cp-alpha",this._newColor.alpha().toString()),(u=this.hsvSlider)==null||u.move(this._newColor.saturation(),1-this._newColor.value()),(c=this.hueSlider)==null||c.move(this._newColor.hue()/360),(h=this.alphaSlider)==null||h.move(this._newColor.alpha()),t&&this.$colorInput&&(this.$colorInput.value=this._newColor.string(this._format))}updateAppliedColor(t=!0){const e=this._unset?"":this._color.string(this.config.defaultFormat);this.$input&&(this.$input.value=e,this.$input.dataset.color=e),this.$toggle&&(this.$toggle.dataset.color=e),this.$button&&this.$button.classList.toggle("cp_unset",this._unset),t&&(this.emit("pick",this.color),this.$input&&(this._firingChange=!0,this.$input.dispatchEvent(new Event("change")),this._firingChange=!1))}updateFormat(){if(!this.$formats)return;this.$formats.forEach(e=>e.removeAttribute("aria-checked"));const t=this.$formats.find(e=>e.dataset.format===this._format);t&&(t.ariaChecked="true")}updateSwatches(){if(!this.$dialog)return;const t=this.$dialog.querySelector(".cp_swatches");t.textContent="",this._swatches.forEach(e=>{const i=document.createElement("button");i.className="cp_swatch",i.style.setProperty("--cp-color",e),i.dataset.color=e;const n=new F(i.dataset.color);i.addEventListener("click",()=>{this._setNewColor(n),this.config.swatchesOnly&&this.close()}),t.append(i)})}}b(ke,"Color",F);export{ke as default};
